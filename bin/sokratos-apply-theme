#!/usr/bin/env bash

# Check if the user provided an argument
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <path_to_image>"
    exit 1
fi

IMAGE="$1"

# Send notification to the user
# notify-send "Changing Theme" "Applying new wallpaper and updating colors, please wait until confirmation..."

# Set wallpaper
swww img "$IMAGE"

# Use Matugen to generate Material You colors
# wallust run "$IMAGE"
# matugen image "$IMAGE"
matugen image "$IMAGE"
# Use wallust to generate colors for terminal
pywalfox update

# Refresh swaync
pkill swaync
swaync > /dev/null 2>&1 &

# Refresh waybar
pkill waybar
waybar > /dev/null 2>&1 &

# kill -SIGUSR1 $(pidof kitty)
notify-send "Theme Applied" "Wallpaper and theme updated successfully!"
